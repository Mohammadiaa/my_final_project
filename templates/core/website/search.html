{% extends 'base.html' %}

{% block content %}

<h2>Search Results for: "{{ query }}"</h2>

<hr>

{% if results %}
    {% for post in results %}
        <article class="search-result-item">
            <h3>{{ post.title }}</h3>

            {% if post.image %}
                <img src="{{ post.image.url }}" width="200" alt="{{ post.title }}">
            {% endif %}

            <p>{{ post.content|truncatewords:30 }}</p>

            <small>
                Categories:
                {% for cat in post.categories.all %}
                    {{ cat.name }}{% if not forloop.last %}, {% endif %}
                {% endfor %}
            </small>

            <br>

            <small>
                Tags:
                {% for tag in post.tags.all %}
                    #{{ tag.name }}
                {% endfor %}
            </small>
        </article>

        <hr>
    {% endfor %}
{% else %}
    <p>No results found.</p>
{% endif %}

{% endblock %}
